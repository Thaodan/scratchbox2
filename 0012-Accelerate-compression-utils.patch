From ae4bd7c53b6442f6c1db0b36e6c4fab5258bc1d5 Mon Sep 17 00:00:00 2001
From: Juha Kallioinen <juha.kallioinen@jollamobile.com>
Date: Thu, 2 May 2013 08:30:23 +0000
Subject: [PATCH] Accelerate compression utils

Add /usr/bin/cpio, xz, zip to accelerated programs

Signed-off-by: Juha Kallioinen <juha.kallioinen@jollamobile.com>
---
 modes/obs-rpm-build+pp/fs_rules.lua |    9 +++++++++
 modes/obs-rpm-build/fs_rules.lua    |    9 +++++++++
 2 files changed, 18 insertions(+)

diff --git a/modes/obs-rpm-build+pp/fs_rules.lua b/modes/obs-rpm-build+pp/fs_rules.lua
index ab8fa5a..cc4199f 100644
--- a/modes/obs-rpm-build+pp/fs_rules.lua
+++ b/modes/obs-rpm-build+pp/fs_rules.lua
@@ -440,6 +440,15 @@ emulate_mode_rules_usr_bin = {
 		{path="/usr/bin/qtchooser",
 		 func_class = FUNC_CLASS_EXEC,
 		 actions=accelerated_program_actions},
+		{path="/usr/bin/cpio",
+		 func_class = FUNC_CLASS_EXEC,
+		 actions=accelerated_program_actions},
+		{path="/usr/bin/zip",
+		 func_class = FUNC_CLASS_EXEC,
+		 actions=accelerated_program_actions},
+		{path="/usr/bin/xz",
+		 func_class = FUNC_CLASS_EXEC,
+		 actions=accelerated_program_actions},
 
 		-- perl & python:
 		-- 	processing depends on SBOX_REDIRECT_IGNORE,
diff --git a/modes/obs-rpm-build/fs_rules.lua b/modes/obs-rpm-build/fs_rules.lua
index 3d75a1f..3485523 100644
--- a/modes/obs-rpm-build/fs_rules.lua
+++ b/modes/obs-rpm-build/fs_rules.lua
@@ -371,6 +371,15 @@ emulate_mode_rules_usr_bin = {
 		{path="/usr/bin/qtchooser",
 		 func_class = FUNC_CLASS_EXEC,
 		 actions=accelerated_program_actions},
+		{path="/usr/bin/cpio",
+		 func_class = FUNC_CLASS_EXEC,
+		 actions=accelerated_program_actions},
+		{path="/usr/bin/zip",
+		 func_class = FUNC_CLASS_EXEC,
+		 actions=accelerated_program_actions},
+		{path="/usr/bin/xz",
+		 func_class = FUNC_CLASS_EXEC,
+		 actions=accelerated_program_actions},
 
 		{path = "/usr/bin/sb2-show", use_orig_path = true,
 		 protection = readonly_fs_always},
-- 
1.7.10.3

